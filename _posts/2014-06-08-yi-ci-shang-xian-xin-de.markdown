---
layout: post
title:  "一次项目上线的心得"
date:   2014-06-08 21:08:00

categories: 技术
---

创业的小项目已经有部分用户了，但新功能，bugfix 要上线，但没有专门的运维团队来，自己上线就得万分小心，只要有用户，就不能像平时那么随便。这不周六的上线让人冒一身冷汗，着实让人着急。不过后来想想，其实有好的上线步骤会避免一些意想不到的问题。以下是我一点感想：


1.**上线步骤文档尽量详细**

上线操作步骤文档应尽量写的详细，运维人员（或上线人员）能看着你的文档能顺利上线升级成功是最好。
避免在上线前对此次版本做的重要操作有所遗漏，应该在新版本一开始考虑到现在的操作是否是下次上线特别注意的，对这些重要操作就应该记下来，如表迁移和旧数据升级的步骤和先后顺序，配置文件的增改

2.**线上环境很难百分百模拟**

测试环境能模拟线上的环境，但模拟不了线上的数据。也许线上一些老的数据会使程序运行错误，程序要考虑新旧数据的兼容

3.**上线前一定要对现有数据进行备份（特别重要）**

即使是不牵扯数据库表的修改都要对数据库进行备份，这应该是一个默认习惯

4.**上线总不会是想象的那么顺利，遇到问题莫慌（特别重要）**

上线总不会是想象的那么顺利，很难做到万无一失。如果升级失败，尤其是遇到功能无法运行，并且影响线上用户使用的重大错误时，这时千万不能因为是在线上就变的手足无措。不能慌，沉住气！

这时候做两件事：

* 赶快停掉服务：避免影响线上的用户使用，产生一些坏数据
* 平静且仔细的查看错误日志：事出必有因，看错误日志是最能解决问题的途径，一步步来，问题总会解决

5.**不断总结，避免再犯同样的错误**

每次上线后遇到的问题、经验应勤于总结，避免在同一个地方再摔跟头

